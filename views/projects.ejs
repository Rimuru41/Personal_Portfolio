<%- include('partials/_htmlheader.ejs') %>

    <div class="blob"></div>

    <nav>
        <div class="logo">Dev<span>Portfolio</span></div>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <section id="home" class="hero content-section">
        <div class="hero-main">
            <h1>Building the <span class="gradient-text">Future</span> of Web.</h1>
            <p class="hero-subtitle">Student at Thapathali Campus, IOE. Specialized in Node.js, Express, and PostgreSQL.
            </p>
            <div class="hero-actions">
                <button id="load-skills" class="btn-secondary">View My Skills</button>
            </div>
            <div id="skills-container" class="skills-box"></div>
        </div>

        <div class="about-section">
            <div class="about-card">
                <h2>About Me</h2>
                <p>I'm a passionate Full Stack Developer currently pursuing my engineering degree at Thapathali Campus.
                    I love turning complex problems into simple, beautiful, and intuitive designs.</p>
            </div>
            <div class="services-grid">
                <div class="service-item">
                    <span class="service-icon">‚ö°</span>
                    <h3>Backend Dev</h3>
                    <p>Building scalable and robust server-side applications using Node.js and PostgreSQL.</p>
                </div>
                <div class="service-item">
                    <span class="service-icon">üé®</span>
                    <h3>UI/UX Design</h3>
                    <p>Creating modern, clean, and user-centric interfaces with focus on performance.</p>
                </div>
                <div class="service-item">
                    <span class="service-icon">üê≥</span>
                    <h3>DevOps</h3>
                    <p>Experience with Docker and containerization for modern development workflows.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="projects" class="content-section hidden">
        <div class="section-header">
            <h2 class="section-title">Projects</h2>
            <% if (isAdmin) { %>
                <button id="add-project-btn" class="btn-primary"><span class="plus">+</span> Add Project</button>
                <% } %>
        </div>
        <div class="project-grid">
            <% projects.forEach(project=> { %>
                <div class="project-card" data-id="<%= project.id %>">
                    <% if (isAdmin) { %>
                        <div class="card-menu">
                            <button class="menu-trigger">‚ãÆ</button>
                            <div class="menu-dropdown">
                                <button class="edit-btn" data-id="<%= project.id %>">Edit</button>
                                <button class="delete-btn" data-id="<%= project.id %>">Delete</button>
                            </div>
                        </div>
                        <% } %>
                            <div class="card-content">
                                <span class="tech-tag">
                                    <%= project.tech_stack %>
                                </span>
                                <h3>
                                    <%= project.project_name %>
                                </h3>
                                <p>
                                    <%= project.description %>
                                </p>
                                <a href="<%= project.link %>" class="project-link" target="_blank">Source Code ‚Üí</a>
                            </div>
                </div>
                <% }); %>
        </div>
    </section>

    <section id="contact" class="content-section hidden">
        <div class="centered-header">
            <h2 class="section-title">Get In Touch</h2>
        </div>
        <div class="contact-container">
            <div class="contact-card">
                <div class="contact-item">
                    <span class="icon">üìß</span>
                    <div>
                        <h3>Gmail</h3>
                        <a href="mailto:kamalshrestha17104@gmail.com">kamalshrestha17104@gmail.com</a>
                    </div>
                </div>
                <div class="contact-item">
                    <span class="icon">üì±</span>
                    <div>
                        <h3>Phone</h3>
                        <a href="tel:+9779866233024">+977 9866233024</a>
                    </div>
                </div>
                <div class="contact-item">
                    <span class="icon">üíª</span>
                    <div>
                        <h3>GitHub</h3>
                        <a href="https://github.com/Rimuru41" target="_blank">github.com/Rimuru41</a>
                    </div>
                </div>
                <div class="contact-item">
                    <span class="icon">üîó</span>
                    <div>
                        <h3>LinkedIn</h3>
                        <a href="https://www.linkedin.com/in/kamal-shrestha-6b3228324/"
                            target="_blank">linkedin.com/in/kamal-shrestha-6b3228324/</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <% if (isAdmin) { %>
        <!-- Project Modal (Add/Edit) -->
        <div id="project-modal" class="modal">
            <div class="modal-content">
                <h2 id="modal-title">Add Project</h2>
                <form id="project-form">
                    <input type="hidden" id="project-id">
                    <div class="form-group">
                        <label for="title">Project Title</label>
                        <input type="text" id="title" required placeholder="e.g. Portfolio Website">
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" required placeholder="Describe your project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="tech_stack">Tech Stack</label>
                        <input type="text" id="tech_stack" required placeholder="e.g. Node.js, PostgreSQL">
                    </div>
                    <div class="form-group">
                        <label for="link">Source Link</label>
                        <input type="url" id="link" required placeholder="https://github.com/...">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-ghost closeModal">Cancel</button>
                        <button type="submit" class="btn-primary">Save Project</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="modal">
            <div class="modal-content">
                <h2>Confirm Delete</h2>
                <p>Are you sure you want to delete this project? This action cannot be undone.</p>
                <div class="form-actions">
                    <button class="btn-ghost closeModal">Cancel</button>
                    <button id="confirm-delete-btn" class="btn-danger">Delete</button>
                </div>
            </div>
        </div>
        <% } %>

            <!-- Login Modal -->
            <div id="login-modal" class="modal">
                <div class="modal-content login-modal-content">
                    <h2>üîí Admin Login</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-username">Username</label>
                            <input type="text" id="login-username" required placeholder="Username"
                                autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" required placeholder="Password"
                                autocomplete="current-password">
                        </div>
                        <div id="login-error" class="login-error"></div>
                        <div class="form-actions">
                            <button type="button" class="btn-ghost closeModal">Cancel</button>
                            <button type="submit" class="btn-primary">Login</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Admin corner button -->
            <% if (isAdmin) { %>
                <button id="admin-corner-btn" class="admin-corner" title="Logout">‚öôÔ∏è</button>
                <% } else { %>
                    <button id="admin-corner-btn" class="admin-corner" title="Admin Login">üîí</button>
                    <% } %>

                        <script>
                            window.__isAdmin = <%= isAdmin ? 'true' : 'false' %>;
                        </script>
                        <script src="/script.js"></script>

                        <%- include('partials/_htmlfoot.ejs') %>